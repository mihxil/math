<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Demo</title>
<link rel="stylesheet" href="./index.css">
<meta name="keywords" content="open source, documentation">

<script src="https://cjrtnc.leaningtech.com/20250718_2607/loader.js" type="text/javascript"></script>
<script src="resources/demo.js" type="module" ></script>
<link rel="stylesheet" href="resources/demo.css" />
</head>
<body class="article">
<div id="header">
<h1>Demo</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>These are a running demos (using <a href="https://cheerpj.com/docs/getting-started/Java-library">cheerpj</a>). It doesn&#8217;t always work.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solver">Solver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The same idea as my <a href="https://meeuw.org/flippo/flippo.html">very first applet</a>.</p>
</div>
<div class="paragraph">
<p>Give desired outcome number, and a few input numbers, and it will find the possible ways to get it using those input numbers.</p>
</div>
<div class="paragraph">
<p>This combines several aspects of this project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It uses 'rational numbers' to make all operations exact</p>
</li>
<li>
<p>It uses the permutation group to permute all combinations of values</p>
</li>
<li>
<p>It uses the Abstract Syntax Tree feature to combine values and operators</p>
</li>
<li>
<p>It uses some features of the group of 'RationalNumbers', e.g. to perform operators generically.</p>
</li>
</ul>
</div>
<form id="solver" class="demo">
  <label for="solver_result">Desired outcome:</label> <input type="text" id="solver_result"  list="result-examples" value="24" />
   <datalist id="solver_result-examples">
     <option value="24">
     <option value="4 1/3">
     <option value="41">
   </datalist>
   <br />
  <label for="solver_numbers">Input numbers:</label><input type="text" id="solver_numbers" value="8 8 3 3"/>

  <br />
  <textarea id="solver_output" > </textarea>
  <br />
  <button name="submit">go!</button>
</form>
<details>
<summary class="title">java source code</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.meeuw.math.test;

import java.util.*;
import java.util.concurrent.atomic.AtomicLong;
import java.util.stream.Stream;

import org.meeuw.math.abstractalgebra.permutations.PermutationGroup;
import org.meeuw.math.abstractalgebra.rationalnumbers.RationalNumber;
import org.meeuw.math.abstractalgebra.rationalnumbers.RationalNumbers;
import org.meeuw.math.arithmetic.ast.*;
import org.meeuw.math.exceptions.MathException;
import org.meeuw.math.operators.AlgebraicBinaryOperator;

import static org.meeuw.math.CollectionUtils.navigableSet;
import static org.meeuw.math.operators.BasicAlgebraicBinaryOperator.*;

/**
 * A tool to evaluate all possible expressions (of a certain number of rational numbers) (and check if it equals a certain value)
 */
public  class Solver {

    private static final RationalNumbers STRUCTURE = RationalNumbers.INSTANCE;
    private static final NavigableSet&lt;AlgebraicBinaryOperator&gt; OPERATORS = navigableSet(
        ADDITION, SUBTRACTION, MULTIPLICATION, DIVISION
    );

    private final AtomicLong tries = new AtomicLong();

    public Stream&lt;Expression&lt;RationalNumber&gt;&gt; stream(RationalNumber... set) {
        PermutationGroup permutations = PermutationGroup.ofDegree(set.length);

        return permutations.stream()
            .map(permutation -&gt; permutation.permute(set))
            .map(List::of)
            .distinct()
            .flatMap(permuted -&gt;
                AST.stream(
                    permuted,
                    OPERATORS
                )
            )
            .map( e -&gt; e.canonize(STRUCTURE))
            .distinct()
            .peek(e -&gt; tries.getAndIncrement());
    }



    public Stream&lt;EvaluatedExpression&lt;RationalNumber&gt;&gt; evaledStream(RationalNumber... set) {
        return stream(set)
            .map(e -&gt; {
                try {
                    RationalNumber evaled = e.eval();
                    return new EvaluatedExpression&lt;&gt;(e, evaled);
                } catch (MathException ex) {
                    return null;
                }
            })
            .filter(Objects::nonNull);
    }


    /**
     *
     */
    public static SolverResult result(String resultString, String[] numbers) {
        RationalNumber result = STRUCTURE.parse(resultString);
        RationalNumber[] set = new RationalNumber[numbers.length];
        for (int i = 0; i &lt; set.length; i++) {
            set[i] = STRUCTURE.parse(numbers[i]);
        }
        Solver solver = new Solver();
        AtomicLong matches = new AtomicLong();
        return new SolverResult(solver.evaledStream(set)
            .filter(e -&gt;
                e.result().eq(result)
            ).peek(e -&gt; matches.getAndIncrement())
            .map(EvaluatedExpression::toString),
            solver.tries, matches);
    }

    public record SolverResult(Stream&lt;String&gt; stream, AtomicLong tries, AtomicLong matches) {

    }


    public static void main(String[] integers) {
        if (integers.length &lt; 3) {
            System.out.println();
            System.exit(1);
        }
        SolverResult result = result(integers[0], Arrays.copyOfRange(integers, 1, integers.length));
        result.stream().forEach(System.out::println);
        System.out.println("ready found " + result.matches().get() + ", tried " + result.tries.get() );
    }
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">javascript</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">async function setupSolver() {

    const form = document.querySelector('#solver');
    const button = form.querySelector('button');
    const buttonText = button.textContent;
    const textarea = form.querySelector('textarea');

    let Solver = null;
    form.onsubmit = async (e) =&gt; {
        e.preventDefault();
        Solver = await setupFormWithClass(button, 'org.meeuw.math.test.Solver');
        await cj.org.meeuw.math.abstractalgebra.rationalnumbers.RationalNumbers

        const result = form.querySelector("#solver_result").value;
        const numbers = form.querySelector("#solver_numbers").value.split(" ");
        textarea.value = '';
        button.textContent = "executing..";
        try {
            const solverResult = await Solver.result(result, numbers);
            const stream = await solverResult.stream();
            const lines = await stream.toArray();
            for (let i = 0; i &lt; lines.length; i++) {
                textarea.value += await lines[i].toString() + "\n";
            }
            const tries = await (await solverResult.tries()).get();
            const matches = await (await solverResult.matches()).get();
            textarea.value += `\nFound: ${matches}`;
            textarea.value += `\nTried: ${tries}`;
        } catch (error) {
            textarea.value += await error.toString();
        }
        button.textContent = buttonText;
        button.disabled = false;
    };
}
setupSolver();</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_date_parsing">Dynamic date parsing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>mihxil-time</code> module contain a 'dynamic date parser`</p>
</div>
<form id="dynamicdate" class="demo">
  <label for="dynamicdate_toparse">String to parse:</label> <input type="text" id="dynamicdate_toparse"  list="toparse-examples" value="" />
   <datalist id="dynamicdate_toparse-examples">
   </datalist>
   <br />
  <textarea id="dynamicdate_output" > </textarea>
  <br />
  <button name="submit">go!</button>
</form>
<details>
<summary class="title">javascript</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">async function setupDynamicDate() {

    const form = document.querySelector('#dynamicdate');
    const button = form.querySelector('button');
    const buttonText = button.textContent;
    const textarea = form.querySelector('textarea');

    let DynamicDateTime = null;
    form.onsubmit = async (e) =&gt; {
        e.preventDefault();
        DynamicDateTime = await setupFormWithClass(button, 'org.meeuw.time.dateparser.DynamicDateTime');
        button.textContent = "executing..";
        try {
            const parser = await new DynamicDateTime();
            const parseResult = await parser.applyWithException(form.querySelector("#dynamicdate_toparse").value);
            textarea.value = await parseResult.toString();
        } catch (error) {
            textarea.value = await error.toString();
        }
        button.textContent = buttonText;
        button.disabled = false;
    };
}
setupDynamicDate();</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-07-21 15:01:06 +0200
</div>
</div>
</body>
</html>