<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Demo</title>
<link rel="stylesheet" href="./index.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<meta name="keywords" content="open source, documentation" />
<meta name="demo" content="demo" />
<script src="https://cjrtnc.leaningtech.com/20250718_2607/loader.js"></script>
<!--script src="https://cjrtnc.leaningtech.com/4.2/loader.js"></script-->
<script src="resources/demo.js" type="module" ></script>
<link rel="stylesheet" href="resources/demo.css" />

</head>
<body class="article">
<div id="header">
<h1>Demo</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>These are a running <a href="https://webassembly.org/">webassembly</a> demos (using <a href="https://cheerpj.com/docs/getting-started/Java-library">cheerpj</a>).</p>
</div>
<div class="paragraph">
<p>It doesn&#8217;t always work, which I haven&#8217;t quit understood yet.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calculator">Calculator</h2>
<div class="sectionbody">
<form id="calculator" class="demo">
  <label for="calculator_toparse">String to evaluate: <span class="help"></span></label> <input type="text" id="calculator_toparse"  list="calculator_toparse-examples" value="" />
   <datalist id="calculator_toparse-examples">
   <!-- filled by calculator.js -->
   </datalist>
   <label for="calculator_field">Field:</label>
   <select id="calculator_field"  >
   <!-- filled by calculator.js -->
   </select>
   <br />
  <output id="calculator_output" for="calculator_toparse"> </output>
  <br />
  <button name="submit">go!</button>
</form>
<details>
<summary class="title">java</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Unresolved directive in README-source.adoc - include::src/main/java/org/meeuw/math/test/Calculator.java[indent=-,tag=eval]</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">javascript</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    constructor() {
        <span class="reserved">super</span>(<span class="string"><span class="delimiter">'</span><span class="content">#calculator</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">org.meeuw.math.demo.Calculator</span><span class="delimiter">'</span></span>);
        <span class="local-variable">this</span>.input = <span class="local-variable">this</span>.form.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>);
        <span class="local-variable">this</span>.field = <span class="local-variable">this</span>.form.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">select</span><span class="delimiter">'</span></span>);
        <span class="local-variable">this</span>.inputDataList= <span class="local-variable">this</span>.form.querySelector(<span class="string"><span class="delimiter">'</span><span class="content">datalist</span><span class="delimiter">'</span></span>);
        <span class="local-variable">this</span>.information = <span class="predefined-constant">null</span>;
    }

    insert(c) {
        const input = <span class="local-variable">this</span>.input;
        const start = input.selectionStart;
        const end = input.selectionEnd;
        const value = input.value;
        input.value = value.slice(<span class="integer">0</span>, start) + c + value.slice(end);
        input.setSelectionRange(start + <span class="integer">1</span>, start + <span class="integer">1</span>);
    }

    async setupForm() {
        await <span class="reserved">super</span>.setupForm();
        <span class="local-variable">this</span>.form.addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">beforeinput</span><span class="delimiter">'</span></span>, async (e) =&gt; {
            <span class="local-variable">this</span>.form.querySelector(<span class="string"><span class="delimiter">&quot;</span><span class="content">span.help</span><span class="delimiter">&quot;</span></span>).innerHTML = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>;
            <span class="keyword">if</span> (e.data === <span class="string"><span class="delimiter">'</span><span class="content">=</span><span class="delimiter">'</span></span>) {
                console.log(<span class="local-variable">this</span>.input.value);
                e.preventDefault();
                e.stopImmediatePropagation();
                await <span class="local-variable">this</span>.handleSubmit();
            }
             <span class="keyword">if</span> (e.data === <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span>) {
                 <span class="local-variable">this</span>.form.querySelector(<span class="string"><span class="delimiter">&quot;</span><span class="content">span.help</span><span class="delimiter">&quot;</span></span>).innerHTML = <span class="string"><span class="delimiter">&quot;</span><span class="content">to type * use [</span><span class="delimiter">&quot;</span></span>;
                 e.preventDefault();
                 e.stopImmediatePropagation();
                 <span class="local-variable">this</span>.insert(<span class="string"><span class="delimiter">'</span><span class="content">â‹…</span><span class="delimiter">'</span></span>)
             }
            <span class="keyword">if</span> (e.data === <span class="string"><span class="delimiter">'</span><span class="content">[</span><span class="delimiter">'</span></span>) {
                 e.preventDefault();
                 e.stopImmediatePropagation();
                 <span class="local-variable">this</span>.insert(<span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span>)
             }
        });
    }

    async onInView(Calculator){

        await <span class="reserved">super</span>.onInView(Calculator);
        <span class="comment">// using the field information to update the example per field</span>
        <span class="keyword">if</span> (<span class="local-variable">this</span>.information === <span class="predefined-constant">null</span>) {
            <span class="local-variable">this</span>.information = {};
            const fi = await (await BaseClass.cj)[<span class="string"><span class="delimiter">'</span><span class="content">org.meeuw.math.test.Calculator$FieldInformation</span><span class="delimiter">'</span></span>];
            const values = await fi.values();

            <span class="keyword">for</span> (let i = <span class="integer">0</span>; i &lt; values.length; i++) {
                const value = values[i];
                const examples = await value.getExamples();
                const description = await value.getDescription();
                const field = await value.getField();
                const string = await field.toString();

                const e = [];
                <span class="keyword">for</span> (let j = <span class="integer">0</span>; j &lt; examples.length; j++) {
                    e[j] = await examples[j];
                }
                <span class="local-variable">this</span>.information[await values[i].name()] = {
                    <span class="key">examples</span>: e,
                    <span class="key">description</span>: description,
                    <span class="key">string</span>: string
                };
            }
        }
        await <span class="local-variable">this</span>.updateFieldList();
        <span class="local-variable">this</span>.field.addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">change</span><span class="delimiter">'</span></span>, () =&gt; {
            <span class="local-variable">this</span>.updateDataList();
        });
        await <span class="local-variable">this</span>.updateDataList();


    }

    updateFieldList() {
        <span class="keyword">for</span> (const [key, value] of Object.entries(<span class="local-variable">this</span>.information)) {

            const option = document.createElement(<span class="string"><span class="delimiter">'</span><span class="content">option</span><span class="delimiter">'</span></span>);
            option.value = key;
            option.text = value.description + <span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span> + value.string;
            <span class="local-variable">this</span>.field.appendChild(option);
        }
    }

    async updateDataList() {
        const selectedField = <span class="local-variable">this</span>.field.value;
        const information = <span class="local-variable">this</span>.information[selectedField];
        <span class="keyword">if</span> (information) {
            <span class="local-variable">this</span>.inputDataList.innerHTML = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>;
            <span class="keyword">for</span> (const example of information.examples) {
                const option = document.createElement(<span class="string"><span class="delimiter">'</span><span class="content">option</span><span class="delimiter">'</span></span>);
                option.value = example;
                option.text = example;
                <span class="local-variable">this</span>.inputDataList.appendChild(option);
            }
            console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Updated data list for</span><span class="delimiter">&quot;</span></span>, selectedField, information.examples);
        }

    }

    async onSubmit(Calculator) {
        <span class="local-variable">this</span>.output.value = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>;
        <span class="local-variable">this</span>.textContent = <span class="string"><span class="delimiter">&quot;</span><span class="content">executing..</span><span class="delimiter">&quot;</span></span>;
        <span class="comment">//console.log(&quot;evaluating&quot;, this.input.value, &quot;for&quot;, this.field.value);</span>
        <span class="local-variable">this</span>.output.value = await Calculator.eval(
            <span class="local-variable">this</span>.input.value, <span class="local-variable">this</span>.field.value
        );
    }

}</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_solver">Solver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The same idea as my <a href="https://meeuw.org/flippo/flippo.html">very first applet</a>. Solving the '24 flippo game'.</p>
</div>
<div class="paragraph">
<p>Give the desired outcome number, and a few input numbers, and it will find the possible ways to get it using those input numbers.</p>
</div>
<div class="paragraph">
<p>This combines several aspects of this project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It uses 'rational numbers' to make all operations exact</p>
</li>
<li>
<p>It uses the permutation group to permute all combinations of values</p>
</li>
<li>
<p>It uses the Abstract Syntax Tree feature to combine values and operators</p>
</li>
<li>
<p>It uses some features of the Field, e.g. to perform operators generically.</p>
</li>
<li>
<p>It will currently use the field of <code>RationalNumbers</code> <em>or</em> <code>GaussianRationals</code> if the input contains a complex number. I might add also suport for <code>RealField</code> (and for example also support the POW operator)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cheerpj still sometimes behaves a bit erraticly, I think something may be wrong with default methods?</p>
</div>
<form id="solver" class="demo">
  <label for="solver_outcome">Desired outcome:</label>
  <input type="text"
         required="required"
         id="solver_outcome"  list="solver_outcome-examples"
         data-parser="parseOutcome"
         data-error-message="enter one (fractional) number"
         value="24"/>
  <datalist id="solver_outcome-examples">
     <option value="24">the original 24 game value</option>
     <option value="4 1/3">factions are allowed</option>
     <option value="41"></option>
     <option value="120">a nicer value for 5 input numbers</option>
   </datalist>
   <br />
  <label for="solver_input">Input numbers:</label>
  <input type="text" id="solver_input"
         list="solver_input-examples"
         required="required"
         placeholder="Enter a few numbers (probably no more than 5)"
          data-parser="parseInput"
          data-error-message="enter one or more (fractional) numbers"
         />
   <datalist id="solver_input-examples">
     <option value="8 8 3 3">a hard one to make 24 with</option>
     <option value="4 7 7 7 8" >a hard one to make 120 with</option>

   </datalist>
  <br />
  <output id="solver_output"  for="solver_result solver_numbers"> </output>
  <br />
  <button name="submit">go!</button>
</form>
<details>
<summary class="title">java source code</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Unresolved directive in README-source.adoc - include::src/main/java/org/meeuw/math/test/Solver.java[indent=-]</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">javascript</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    async onSubmit(Solver) {
        <span class="local-variable">this</span>.output.value += <span class="string"><span class="delimiter">&quot;</span><span class="content">using: </span><span class="delimiter">&quot;</span></span> + await (<span class="local-variable">this</span>.model.field).toString();
        const solverResult = await Solver.solve(
            <span class="local-variable">this</span>.model.field, self.outcome.value, self.input.value);

        const stream = await solverResult.stream();
        const lines = await stream.toArray();
        <span class="keyword">for</span> (let i = <span class="integer">0</span>; i &lt; lines.length; i++) {
            <span class="local-variable">this</span>.output.value += <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span> + await lines[i].toString();
        }
        const tries = await (await solverResult.tries()).get();
        const matches = await (await solverResult.matches()).get();
        <span class="local-variable">this</span>.output.value += <span class="error">`</span><span class="error">\</span>nFound: <span class="predefined">$</span>{matches}<span class="error">`</span>;
        <span class="local-variable">this</span>.output.value += <span class="error">`</span><span class="error">\</span>nTried: <span class="predefined">$</span>{tries}<span class="error">`</span>;
    }
}</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_date_parsing">Dynamic date parsing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>mihxil-time</code> module contain a 'dynamic date parser. I dusted this of from old <a href="mmbase.org">mmbase</a> code.</p>
</div>
<form id="dynamicdate" class="demo">
  <label for="dynamicdate_toparse">String to parse:</label> <input type="text" id="dynamicdate_toparse"  list="dynamicdate_toparse-examples" value="" />
   <datalist id="dynamicdate_toparse-examples">
    <option value="0"></option>
    <option value="10000"></option>
    <option value="-10000"></option>
    <option value="+1000"></option>
    <option value="1973-05-03"></option>
    <option value="2006-05-09"></option>
    <option value="-3-12-25"></option>
    <option value="2000-01-01 16:00"></option>
    <option value="TZUTC 2001-01-01 16:00"></option>
    <option value="today 12:34:56.789"></option>
    <option value="now"></option>
    <option value="today"></option>
    <option value="tomorrow"></option>
    <option value="now + 10 minute"></option>
    <option value="today + 5 day"></option>
    <option value="now this year"></option>
    <option value="next august"></option>
    <option value="today + 6 month next august"></option>
    <option value="tomonth"></option>
    <option value="borreltijd"></option>
    <option value="today + 5 dayish"></option>
    <option value="yesteryear"></option>
    <option value="mondayish"></option>
    <option value="duration + 5 minute"></option>
    <option value="duration + 100 year"></option>
    <option value="TZUTC today noon"></option>
    <option value="TZEurope/Amsterdam today noon"></option>
    <option value="TZUTC today"></option>
    <option value="TZEurope/Amsterdam today"></option>
    <option value="TZ UTC today noon"></option>
    <option value="TZ Europe/Amsterdam today noon"></option>
    <option value="TZ UTC today"></option>
    <option value="TZ Europe/Amsterdam today"></option>
    <option value="TZ Europe/Amsterdam -1000"></option>
    <option value="today 6 oclock"></option>
    <option value="today 23 oclock"></option>
    <option value="today 43 oclock"></option>
    <option value="tosecond"></option>
    <option value="tominute"></option>
    <option value="tohour"></option>
    <option value="today"></option>
    <option value="previous monday"></option>
    <option value="tomonth"></option>
    <option value="toyear"></option>
    <option value="tocentury"></option>
    <option value="tocentury_pedantic"></option>
    <option value="toera"></option>
    <option value="toweek"></option>
    <option value="now this second"></option>
    <option value="now this minute"></option>
    <option value="now this hour"></option>
    <option value="now this day"></option>
    <option value="today previous monday"></option>
    <option value="now this month"></option>
    <option value="now this year"></option>
    <option value="now this century"></option>
    <option value="now this era"></option>
    <option value="now - 15 year this century"></option>
    <option value="now - 20 year this century_pedantic"></option>
    <option value="today + 2 century"></option>
    <option value="toera - 1 minute"></option>
    <option value="this july"></option>
    <option value="previous july"></option>
    <option value="next july"></option>
    <option value="this sunday"></option>
    <option value="previous sunday"></option>
    <option value="next sunday"></option>
    <option value="2009-W01-01"></option>
    <option value="2009-W53-7"></option>
    <option value="2006-123"></option>
    <option value="2005-01-01 this monday"></option>
    <option value="next year"></option>
    <option value="&quot;spring&quot;"></option>
    <option value="next year &quot;spring&quot;"></option>
    <option value="&quot;easter sunday&quot;"></option>
   </datalist>
   <br />
  <output id="dynamicdate_output" for="dynamicdate_toparse"> </output>
  <br />
  <button name="submit">go!</button>
</form>
<details>
<summary class="title">javascript</summary>
<div class="content">
<div class="paragraph">
<p>This is the source code for the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">async onSubmit(DynamicDateTime){
    <span class="keyword">try</span> {
        const parser = await <span class="keyword">new</span> DynamicDateTime();
        const parseResult = await parser.applyWithException(<span class="local-variable">this</span>.form.querySelector(<span class="string"><span class="delimiter">&quot;</span><span class="content">#dynamicdate_toparse</span><span class="delimiter">&quot;</span></span>).value);
        <span class="local-variable">this</span>.output.value = await parseResult.toString();
    } <span class="keyword">catch</span> (error) {
        console.log(error);
    }

}</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-08-31 21:20:25 UTC
</div>
</div>
</body>
</html>