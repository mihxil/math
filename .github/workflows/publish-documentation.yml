---
name: publish documentation
on:
  push:
    branches: [main]
    paths:
      - 'README.adoc'
      - 'docs/Makefile'
      - 'docs/algebras.dot.m4'
      - '.github/workflows/publish-documentation.yml'
jobs:
  publish:
    runs-on: ubuntu-latest
    container: asciidoctor/docker-asciidoctor:latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          cd docs
          apk add graphviz m4
          make clean index.html
        name: Create html from adoc
      - name: Commit updated documentation
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: Automated update of documentation https://mihxil.github.io/math/"
          file_pattern: docs/**
        if: ${{ github.event_name == 'push' }}
