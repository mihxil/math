---
name: publish documentation
on:
  push:
    branches: [main]
    paths:
      - 'README.adoc'
      - 'docs/Makefile'
      - '.github/workflows/publish-documentation.yml'
jobs:
  publish:
    runs-on: ubuntu-latest
    container: asciidoctor/docker-asciidoctor:latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          cd docs
          make clean all
        name: Create html from adoc
      - name: push changes
        run: |
          git config --global user.name 'github actions'
          git config --global user.email 'github@meeuw.org'
          git pull
          git commit -am "Automated update of documentation https://mihxil.github.io/math/"
          git push
